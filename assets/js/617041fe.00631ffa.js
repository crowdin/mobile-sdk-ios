"use strict";(self.webpackChunk_crowdin_mobile_sdk_ios_website=self.webpackChunk_crowdin_mobile_sdk_ios_website||[]).push([[199],{891:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"setup","title":"Setup","description":"To configure iOS SDK integration you need to:","source":"@site/docs/setup.mdx","sourceDirName":".","slug":"/setup","permalink":"/mobile-sdk-ios/setup","draft":false,"unlisted":false,"editUrl":"https://github.com/crowdin/mobile-sdk-ios/tree/master/website/docs/setup.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/mobile-sdk-ios/installation"},"next":{"title":"Real-Time Preview","permalink":"/mobile-sdk-ios/advanced-features/real-time-preview"}}');var r=i(4848),o=i(8453);const s={},l="Setup",d={},a=[{value:"Getting Started",id:"getting-started",level:2},{value:"Swift",id:"swift",level:3},{value:"Objective-C",id:"objective-c",level:3},{value:"Alternative Setup: Info.plist",id:"alternative-setup-infoplist",level:3},{value:"Config Options Reference",id:"config-options-reference",level:2},{value:"OAuth Options",id:"oauth-options",level:3},{value:"Additional Features",id:"additional-features",level:2},{value:"Translations Update Interval",id:"translations-update-interval",level:3},{value:"Change locale programmatically",id:"change-locale-programmatically",level:3},{value:"<code>addDownloadHandler</code> closure",id:"adddownloadhandler-closure",level:3},{value:"SwiftUI Support",id:"swiftui-support",level:2},{value:"Supported Localization File Formats",id:"supported-localization-file-formats",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"setup",children:"Setup"})}),"\n",(0,r.jsx)(n.p,{children:"To configure iOS SDK integration you need to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Upload your localization files to Crowdin. If you have existing translations, you can upload them as well. You can use one of the following options:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://crowdin.github.io/crowdin-cli/",children:"Crowdin CLI"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://store.crowdin.com/visual-studio-code",children:"Crowdin VS Code Plugin"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/marketplace/actions/crowdin-action",children:"Crowdin GitHub Action"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://support.crowdin.com/uploading-files/",children:"and more"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Set up Distribution in Crowdin."}),"\n",(0,r.jsx)(n.li,{children:"Set up SDK and enable Over-The-Air Content Delivery feature."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Distribution"})," is a CDN vault that mirrors the translated content of your project and is required for integration with iOS app."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://support.crowdin.com/content-delivery/",children:"Creating a distribution in crowdin.com"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://support.crowdin.com/enterprise/content-delivery/",children:"Creating a distribution in Crowdin Enterprise"})}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The download of translations happens ",(0,r.jsx)(n.strong,{children:"asynchronously"})," after the start of the application. The downloaded translations will be used the next time the app is launched, otherwise the previously cached translations will be used (or local translations if no cache exists)."]}),"\n",(0,r.jsx)(n.li,{children:"The CDN feature does not update the localization files, if you want to add new translations to the localization files, you need to do it yourself."}),"\n",(0,r.jsxs)(n.li,{children:["Once the SDK receives the translations, they're stored on the device as application files for future sessions to minimize requests the next time the app is launched. The storage time can be configured using the ",(0,r.jsx)(n.code,{children:"intervalUpdatesEnabled"})," option."]}),"\n",(0,r.jsx)(n.li,{children:"CDN will cache all translations in the release for up to 1 hour and even if new translations are released in Crowdin, CDN may return them with a delay."}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsxs)(n.p,{children:["There are several ways to set up the SDK, depending on your project. Make sure you have completed the steps in the ",(0,r.jsx)(n.a,{href:"installation",children:"Installation"})," section before proceeding."]}),"\n",(0,r.jsx)(n.h3,{id:"swift",children:"Swift"}),"\n",(0,r.jsxs)(n.p,{children:["Open the ",(0,r.jsx)(n.code,{children:"AppDelegate.swift"})," file and add:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:"import CrowdinSDK\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"application"})," method add:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:'let crowdinProviderConfig = CrowdinProviderConfig(hashString: "{distribution_hash}",\n  sourceLanguage: "{source_language}")\n\nlet crowdinSDKConfig = CrowdinSDKConfig.config()\n  .with(crowdinProviderConfig: crowdinProviderConfig)\n\nCrowdinSDK.startWithConfig(crowdinSDKConfig, completion: {\n    // SDK is ready to use, put code to change language, etc. here\n})\n'})}),"\n",(0,r.jsx)(n.h3,{id:"objective-c",children:"Objective-C"}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"AppDelegate.m"})," add:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectivec",children:"@import CrowdinSDK\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectivec",children:"#import<CrowdinSDK/CrowdinSDK.h>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"application"})," method add:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectivec",children:'CrowdinProviderConfig *crowdinProviderConfig = [[CrowdinProviderConfig alloc] initWithHashString:@"" sourceLanguage:@""];\nCrowdinSDKConfig *config = [[[CrowdinSDKConfig config] withCrowdinProviderConfig:crowdinProviderConfig]];\n\n[CrowdinSDK startWithConfig:config completion:^{\n  // SDK is ready to use, put code to change language, etc. here\n}];\n'})}),"\n",(0,r.jsx)(n.p,{children:"If you have a pure Objective-C project, you will need to take some additional steps:"}),"\n",(0,r.jsx)(n.p,{children:"Add the following code to your Library Search Paths:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add to Library Search Paths:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$(TOOLCHAIN_DIR)/usr/lib/swift/$(PLATFORM_NAME)\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"use_frameworks!"})," to your ",(0,r.jsx)(n.code,{children:"Podfile"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"alternative-setup-infoplist",children:"Alternative Setup: Info.plist"}),"\n",(0,r.jsxs)(n.p,{children:["Configure basic SDK settings in your project's ",(0,r.jsx)(n.code,{children:"Info.plist"})," file:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Add these keys to ",(0,r.jsx)(n.em,{children:"Info.plist"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CrowdinDistributionHash"})," (String) - Your Crowdin CDN hash"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CrowdinSourceLanguage"})," (String) - Source language code in ",(0,r.jsx)(n.a,{href:"http://www.loc.gov/standards/iso639-2/php/English_list.php",children:"ISO 639-1"})," format"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In your ",(0,r.jsx)(n.code,{children:"AppDelegate"})," call the following method:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Swift: ",(0,r.jsx)(n.code,{children:"CrowdinSDK.start()"})]}),"\n",(0,r.jsxs)(n.li,{children:["Objective-C: ",(0,r.jsx)(n.code,{children:"[CrowdinSDK start]"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Info.plist"})," configuration method does not support Screenshots and Real-Time Preview features. To use these features, configure the SDK programmatically."]})}),"\n",(0,r.jsx)(n.h2,{id:"config-options-reference",children:"Config Options Reference"}),"\n",(0,r.jsxs)(n.p,{children:["The SDK configuration is done using the ",(0,r.jsx)(n.code,{children:"CrowdinSDKConfig"})," class. The following options are available:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example Value"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hashString"})}),(0,r.jsx)(n.td,{children:"Distribution Hash"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"7a0c1...o3b"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sourceLanguage"})}),(0,r.jsxs)(n.td,{children:["Source language code (",(0,r.jsx)(n.a,{href:"http://www.loc.gov/standards/iso639-2/php/English_list.php",children:"ISO 639-1"}),")"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'sourceLanguage: "en"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"organizationName"})}),(0,r.jsx)(n.td,{children:"Organization domain (Enterprise only)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"mycompany"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"settingsEnabled"})}),(0,r.jsxs)(n.td,{children:["Enable ",(0,r.jsx)(n.a,{href:"/advanced-features/sdk-controls",children:"SDK Controls"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"accessToken"})}),(0,r.jsx)(n.td,{children:"Crowdin API Access Token. An alternative to the OAuth-based authorization in the Screenshots and Real-Time Preview features"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"your_token"'})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"oauth-options",children:"OAuth Options"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"CrowdinLoginConfig"})," class provides OAuth configuration options:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example Value"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clientId"})}),(0,r.jsx)(n.td,{children:"Crowdin OAuth Client ID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"gpY2yT...x3TYB"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clientSecret"})}),(0,r.jsx)(n.td,{children:"Crowdin OAuth Client Secret"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"Xz95t...EDx9T"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scope"})}),(0,r.jsxs)(n.td,{children:["OAuth scope (e.g., ",(0,r.jsx)(n.code,{children:"project.screenshot"}),", ",(0,r.jsx)(n.code,{children:"project"}),")"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"project"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"redirectURI"})}),(0,r.jsx)(n.td,{children:"Custom URL scheme for your app"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"crowdintest://"'})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"CrowdinLoginConfig"})," configuration is required for the ",(0,r.jsx)(n.a,{href:"/advanced-features/screenshots",children:"Screenshots"})," and ",(0,r.jsx)(n.a,{href:"/advanced-features/real-time-preview",children:"Real-Time Preview"})," features only."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Read more about creating an ",(0,r.jsx)(n.a,{href:"https://support.crowdin.com/account-settings/#oauth",children:"OAuth application"})," in Crowdin."]})}),"\n",(0,r.jsx)(n.h2,{id:"additional-features",children:"Additional Features"}),"\n",(0,r.jsx)(n.h3,{id:"translations-update-interval",children:"Translations Update Interval"}),"\n",(0,r.jsxs)(n.p,{children:["By default, SDK searches for new translation once per application load, but not more often than 15 minutes. You can update translations in application every defined interval. To enable this feature add pod ",(0,r.jsx)(n.code,{children:"CrowdinSDK/IntervalUpdate"})," to your pod file:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Add to ",(0,r.jsx)(n.code,{children:"Podfile"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:"pod 'CrowdinSDK/IntervalUpdate'\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Configure in SDK:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:".with(intervalUpdatesEnabled: true, interval: {interval})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Where ",(0,r.jsx)(n.code,{children:"interval"})," - defines translations update time interval in seconds. Minimum allowed interval is 15 minutes (900 seconds)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"change-locale-programmatically",children:"Change locale programmatically"}),"\n",(0,r.jsx)(n.p,{children:"By default, the SDK relies on the device locale. To change the SDK target language on the fly regardless of the device locale."}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"CrowdinSDK.currentLocalization"})," property to get or set the current localization language code (",(0,r.jsx)(n.a,{href:"http://www.loc.gov/standards/iso639-2/php/English_list.php",children:"ISO 639-1"}),") used by the Crowdin SDK. When you set this property, the SDK triggers a localization download if needed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:'import CrowdinSDK\n\n// Set the current localization to German\nCrowdinSDK.currentLocalization = "<language_code>"\n\n// ...\n\n// Get the current localization\nif let currentLocale = CrowdinSDK.currentLocalization {\n    print("Current localization: \\(currentLocale)")\n} else {\n    print("Using default localization")\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["This is the recommended way to change the language programmatically. The SDK will download the new localization if it's not already available. If set to ",(0,r.jsx)(n.code,{children:"nil"})," - the localization will be detected automatically based on the languages available in Crowdin and the system's preferred languages."]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"The UI doesn't update automatically. You must manually update the UI after changing the localization."})}),"\n",(0,r.jsxs)(n.h3,{id:"adddownloadhandler-closure",children:[(0,r.jsx)(n.code,{children:"addDownloadHandler"})," closure"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"addDownloadHandler"})," method allows you to add a closure that will be called every time new localization is downloaded. This can be useful for performing actions such as updating the user interface or processing the newly downloaded localization data:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:'let handlerId = CrowdinSDK.addDownloadHandler {\n    print("New localization downloaded!")\n    // Perform additional actions, such as updating the UI\n}\n\n// Optionally, you can remove the handler later if needed\nCrowdinSDK.removeDownloadHandler(handlerId)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"swiftui-support",children:"SwiftUI Support"}),"\n",(0,r.jsx)(n.p,{children:"SwiftUI support requires explicit localization calls. Use either:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:'Text(NSLocalizedString("key", comment: "comment"))\n'})}),"\n",(0,r.jsx)(n.p,{children:"or the convenience extension:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",children:'Text("key".cw_localized)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["View the ",(0,r.jsx)(n.a,{href:"/guides/swift-ui",children:"Swift UI Localization guide"})," for more information."]}),"\n",(0,r.jsx)(n.h2,{id:"supported-localization-file-formats",children:"Supported Localization File Formats"}),"\n",(0,r.jsx)(n.p,{children:"The Crowdin SDK supports the following localization file formats:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://store.crowdin.com/strings",children:"iOS Strings"})," and ",(0,r.jsx)(n.a,{href:"https://store.crowdin.com/stringsdict",children:"Stringsdict"})," (",(0,r.jsx)(n.code,{children:".strings"}),", ",(0,r.jsx)(n.code,{children:".stringsdict"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://store.crowdin.com/xliff",children:"Apple XLIFF"})," (",(0,r.jsx)(n.code,{children:".xliff"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://store.crowdin.com/string_catalog",children:"Apple Strings Catalog"})," (",(0,r.jsx)(n.code,{children:".xcstrings"}),"). \u26a0\ufe0f Only the CDN Content Delivery feature is available for the Apple Strings Catalog format. The Screenshots and Real-Time Preview features are not yet supported."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var t=i(6540);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);